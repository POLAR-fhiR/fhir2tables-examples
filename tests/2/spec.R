###
# Endpunkt des fhir r4 Servers
###
#endpoint <-  "https://vonk.fire.ly/R4/"
endpoint <- "https://hapi.fhir.org/baseR4/"

###
# fhir search ohne Endpunktangabe
###
fhir.search <- "Patient?_format=xml&_count=50"
###
# Welche Daten aus den Pages sollen wie in welchen Tabellen erzeugt werden
# Hier nur eine Tabelle Patient mit den EintrÃ¤gen PID, Geschlecht und Geburtsdatum
###
tables.design <- list(
	Patient = list(
		entry   = ".//Patient",
		items = list( 
			PID       = "id/@value", 
			GENDER    = "gender/@value", 
			BIRTHDATE = "birthDate/@value" 
		)
	)
)

###
# filtere Daten in Tabellen vor dem Export ins Ausgabeverzeichnis
###
filter.data <- function( list.of.tables ) {

  ###
  # filter here whatever you want!
  ###
		
  ###
  # nur komplette Datensaetze erwuenscht
  ###
  list.of.tables <- lapply( list.of.tables, na.omit )

  ###
  # gib gefilterte Daten zurueck
  ###
  list.of.tables
}

